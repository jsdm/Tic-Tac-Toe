function reset(){$(".head").text("Welcome to Tic Tac Toe"),$(".field").html("&nbsp"),turn="o",userPoints=[],AIPoints=[],moves=[1,2,3,4,5,6,7,8,9],gameOver=!1}function clicked(e){if(fieldText=$(e).text(),turn===user&&gameOver===!1&&"o"!=fieldText&&"x"!=fieldText){var t=Number($(e).attr("value")),n=$.inArray(t,moves);"o"===turn&&$(e).text("o"),"x"===turn&&$(e).text("x"),userPoints.push(t),moves.splice(n,1),turn="x"===turn?"o":"x",game()}}function AI(){var e=moves[Math.floor(Math.random()*moves.length)],t="div[value='"+e+"']";moves.splice($.inArray(e,moves),1),$(t).text(turn),turn="o"===turn?"x":"o",AIPoints.push(e),game()}function isGameOver(){var e=0,t=0;userPoints=userPoints.sort(),AIPoints=AIPoints.sort();for(var n=won.length-1;n>=0;n--){e=t=0;for(var o=2;o>=0;o--)-1===userPoints.indexOf(won[n][o])&&(o=-1,e=0),e++;for(var r=2;r>=0;r--)-1===AIPoints.indexOf(won[n][r])&&(r=-1,t=0),t++;if(3===e)return console.log(won[n]),"user";if(3===t)return console.log(won[n]),"AI"}}function gamesOver(e){gameOver=!0,"tie"===e?($(".head").text("Game is a TIE!!"),$(".head").effect("shake","slow"),setTimeout(function(){reset(),game()},1500)):"x"===e?($(".head").text(user+" won the game!! Click start to play again"),$(".head").effect("shake","slow"),setTimeout(function(){reset(),game()},2500)):($(".head").text(AIuser+" won the game!! Click start to play again"),$(".head").effect("shake","slow"),setTimeout(function(){reset(),game()},2500))}function game(){n=isGameOver(),"user"===n&&gamesOver("x"),"AI"===n&&gamesOver(""),0===moves.length&&gamesOver("tie"),turn!==user&&gameOver===!1&&AI(),$(".headSub").text("It is "+turn+" turn.")}var n=0,fieldText="",user="",AIuser="",turn="",gameOver=!1,userPoints=[],AIPoints=[],moves=[1,2,3,4,5,6,7,8,9],won=[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]];$(window).load(function(){$("#overlay").fadeIn().find("#modal").fadeIn(),$(".start").on("click",function(e){e.preventDefault(),$("#overlay").fadeIn().find("#modal").fadeIn()}),$(".close").on("click",function(e){e.preventDefault(),$("#overlay").fadeOut().find("#modal").fadeOut()}),$(".x").click(function(){user="x",AIuser="o",reset(),game()}),$(".o").click(function(){user="o",AIuser="x",reset(),game()}),$(".field").on("click",function(){clicked(this)})});